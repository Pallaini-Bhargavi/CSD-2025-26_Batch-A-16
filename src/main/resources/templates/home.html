<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<button class="logout-btn" onclick="showLogoutPopup()">Logout</button>

<div class="page-header">
    <div class="project-title">
        üîê Secure Data Hiding using Calendar Heatmap steganography
    </div>
    <div class="page-subtitle">Dashboard</div>
</div>

<div class="container">
    <div class="card dashboard">
        <button class="btn" onclick="goEncode()">Encode Message</button>
        <button class="btn blue" onclick="goDecode()">Decode Message</button>
    </div>
</div>

<!-- LOGOUT CONFIRM POPUP -->
<div id="logoutConfirmPopup" style="
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    z-index:1000;
    align-items:center;
    justify-content:center;
">
    <div style="
        background:#fff;
        padding:24px;
        border-radius:16px;
        width:360px;
        text-align:center;
        font-weight:600;
        position:relative;
    ">
        <span onclick="closeLogoutPopup()" style="
            position:absolute;
            top:10px;
            right:14px;
            cursor:pointer;
            font-size:18px;
        ">‚úñ</span>

        <div style="margin-bottom:18px;font-size:18px;color: black;">
            Are you sure you want to logout?
        </div>

        <button class="btn blue" onclick="confirmLogout()">Yes</button>
        <button class="btn" onclick="closeLogoutPopup()">No</button>
    </div>
</div>

<script>
/* ===== LOGOUT ON REFRESH ===== */
const nav = performance.getEntriesByType("navigation");
if (nav.length && nav[0].type === "reload") {
    location.replace("/logout?reason=secure");
}

/* ===== NAV ===== */
function goEncode() { location.href = "/encode"; }
function goDecode() { location.href = "/decode"; }

/* ===== LOGOUT POPUP ===== */
function showLogoutPopup() {
    document.getElementById("logoutConfirmPopup").style.display = "flex";
}

function closeLogoutPopup() {
    document.getElementById("logoutConfirmPopup").style.display = "none";
}

function confirmLogout() {
    location.href = "/logout";
}
</script>

</body>
</html>
