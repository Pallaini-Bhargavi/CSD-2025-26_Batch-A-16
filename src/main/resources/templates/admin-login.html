<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Login - Secure Data Hiding</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<button class="back-btn" onclick="location.href='/'">‚Üê Back</button>

<div class="page-header">
    <div class="project-title">
        üîê Secure Data Hiding using Calendar Heatmap steganography
    </div>
    <div class="page-subtitle">Admin Login</div>
</div>

<div class="container">
    <div class="card">

        <form id="adminLoginForm"
              th:action="@{/admin-login}"
              method="post"
              onsubmit="return validateAdminLogin()">

            <label>Admin Email</label>
            <input type="email" name="email" id="adminEmail"
                   placeholder="Admin email">

            <label>Admin Password</label>
            <input type="password" name="password" id="adminPassword"
                   placeholder="**********">

            <button type="submit" class="btn admin-btn">
                Login
            </button>
        </form>

    </div>
</div>

<!-- ================= ERROR POPUP ================= -->
<div id="errorPopup" style="
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    z-index:999;
    align-items:center;
    justify-content:center;
">
    <div style="
        background:#ffffff;
        color:#dc2626;
        padding:22px;
        border-radius:16px;
        width:360px;
        text-align:center;
        font-weight:600;
        position:relative;
    ">
        <span onclick="closeError()" style="
            position:absolute;
            top:10px;
            right:14px;
            cursor:pointer;
            font-size:18px;
            font-weight:700;
            color:#000000;
        ">‚úñ</span>

        <div id="errorMsg"></div>
    </div>
</div>

<!-- ================= SUCCESS POPUP ================= -->
<div id="successPopup" style="
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    z-index:999;
    align-items:center;
    justify-content:center;
">
    <div style="
        background:#ffffff;
        color:#16a34a;
        padding:22px;
        border-radius:16px;
        width:360px;
        text-align:center;
        font-weight:600;
        position:relative;
    ">
        <div> Successfully logged in as Admin</div>
    </div>
</div>

<script>
/* ================= POPUPS ================= */
function showError(msg) {
    document.getElementById("errorMsg").innerText = msg;
    document.getElementById("errorPopup").style.display = "flex";
}

function closeError() {
    document.getElementById("errorPopup").style.display = "none";
}

function showSuccess() {
    document.getElementById("successPopup").style.display = "flex";
}

/* ================= VALIDATION ================= */
function validateAdminLogin() {
    const email = adminEmail.value.trim();
    const password = adminPassword.value;

    if (!email) {
        showError("Admin email is required.");
        return false;
    }

    if (!password) {
        showError("Admin password is required.");
        return false;
    }

    return true;
}
</script>

<!-- ================= BACKEND ERROR ================= -->
<script th:if="${error}">
    showError("[[${error}]]");
</script>

<!-- ================= BACKEND SUCCESS ================= -->
<script th:if="${adminLoginSuccess}">
    showSuccess();
    setTimeout(() => {
        window.location.href = "/admin-dashboard";
    }, 1000);
</script>
<!-- ADMIN LOGOUT SUCCESS POPUP -->
<div id="logoutPopup"
     th:if="${logoutMsg}"
     style="
        position:fixed;
        inset:0;
        background:rgba(0,0,0,0.6);
        z-index:999;
        display:flex;
        align-items:center;
        justify-content:center;
     ">
    <div style="
        background:#ffffff;
        padding:22px;
        border-radius:16px;
        width:360px;
        text-align:center;
        font-weight:600;
        color:#16a34a;
     ">
        <div th:text="${logoutMsg}"></div>
    </div>
</div>

<script th:if="${logoutMsg}">
    setTimeout(() => {
        const popup = document.getElementById("logoutPopup");
        if (popup) popup.remove();   
    }, 1200);
</script>

</body>
</html>
